# Sending Data from NodeMCU flashed with MicroPython to PostgreSQL
## Designed by: Saad Bin Tariq

## Introduction
Welcome to the manual for building an IoT device system using a NodeMCU flashed with MicroPython. This project integrates a DHT11 sensor and a PostgreSQL database to provide hands-on experience in IoT and backend development, along with data visualization through a modern web interface.

## Aim
The primary goal is to collect temperature and humidity data from a DHT11 sensor using a NodeMCU (ESP8266) and store it securely in a PostgreSQL database via Node.js backend APIs. Subsequently, a React frontend application will display this information in a user-friendly manner.

## Components Required
NodeMCU (ESP8266): Microcontroller board based on the ESP8266 WiFi module for collecting sensor data.
DHT11/22 Sensor: Low-cost digital temperature and humidity sensor.
USB to Micro USB Cable: For programming and powering the NodeMCU.
Breadboard and Jumper Wires: For easy component connections.
What is MicroPython?
MicroPython is a lightweight implementation of Python 3 for microcontrollers and embedded systems. It supports Python syntax, offers real-time testing, and has extensive hardware support, making it ideal for IoT projects.

For more information, visit the official MicroPython website.

## Exercises
1. Flashing NodeMCU with MicroPython
Flashing an ESP8266 with MicroPython involves installing the MicroPython firmware onto the module.

## Steps:

Download Firmware: Download the MicroPython firmware for ESP8266 from the official MicroPython website.
Install esptool: Install esptool using the command:

Connect ESP8266: Connect the ESP8266 to your computer and determine the COM port.
Erase Flash: Erase the existing flash using:

Flash Firmware: Flash the new firmware with:

## Connecting Components
Connect your DHT11 to the NodeMCU as follows:

VCC to 3V
GND to Ground (G)
DATA to GPIO pin (D4)

## Uploading Python Code to ESP8266
To upload the Python code to the ESP8266, you will use the main.py file. This file includes the code for reading the temperature and humidity from the DHT11 sensor and sending it to the backend API. Use PyMakr extension in VS Code to upload the code to your NodeMCU.

## Creating the PostgreSQL Database
Create a PostgreSQL database to store temperature and humidity data.

Steps:

Create Database: Create a new database and name it.
Create Table: Create a new schema table with columns for temperature, humidity, and timestamp.

## Making Node Backend APIs to Store and Fetch Data
You will use a server.js file for creating the backend API. This Node.js application will handle POST requests to store sensor data and GET requests to retrieve data.

Steps:

Initialize Node Project: Initialize your Node.js project with:

Install Dependencies: Install necessary dependencies including Express, Body-Parser, CORS, and PG.
Create API: Write the backend code in the server.js file to handle the data operations.

## Creating a React Frontend GUI
Create a React frontend to display the collected data using the app.jsx and app.css files. This interface will fetch data from the backend API and display it in a user-friendly manner.

Steps:

Set Up React Project: Initialize a new React project using Vite.
Replace Files: Replace the app.jsx and app.css files in your React project with the provided files.
Run Application: Start the React application to view the data.

## Making the Localhost Globally Accessible
Use Localtunnel to make your local Node server accessible over the internet.

Steps:

Install Localtunnel: Install Localtunnel globally.
Start Tunnel: Run the Localtunnel command to generate a public URL for your local server.

## Replace the Hosted URL in main.py
Update the endpoint URL in the main.py file with the public URL generated by Localtunnel to ensure the NodeMCU sends data to the correct API endpoint.

## Uploading the Python Code to NodeMCU
Use the PyMakr extension in VS Code to upload the main.py file to your NodeMCU. This will start the process of reading sensor data and sending it to the backend.

## Displaying Data with React Frontend
Run your React frontend application to display the real-time temperature and humidity data.

In conclusion, this project demonstrates how to integrate hardware, software, and data visualization to create a functional and impactful IoT solution. It has applications in various fields such as environmental monitoring, smart agriculture, and home automation. The provided code files for the backend API (server.js), frontend (app.jsx and app.css), and NodeMCU (main.py) are essential for completing this project.
